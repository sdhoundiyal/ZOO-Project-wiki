
= TicketQuery Wiki Macro

The TicketQuery macro lets you display information on tickets within wiki pages.
The query language used by the <tt>[[TicketQuery]]</tt> macro is described in [TracQuery#UsingtheTicketQueryMacro TracQuery] page.

== Usage

[[MacroList(TicketQuery)]]

== Example

{| border=1 class="simple"
!= **Example** =
!= **Result** =
!= **Macro** =
|}

|-----------------------------------------------------------
{| border=1 class="simple"
!=Number of [query:status=new&milestone= Triage tickets]: =
!\
|- 
|  **[[TicketQuery(status=new&milestone=,count)]]**
| \
|- 
| colspan=2| <tt>[[TicketQuery(status=new&milestone=,count)]]</tt> 
|}

|-----------------------------------------------------------
{| border=1 class="simple"
!=Number of new tickets: =
!\
|- 
|  **[[TicketQuery(status=new,count)]]**
| \
|- 
| colspan=2| <tt>[[TicketQuery(status=new,count)]]</tt> 
|}

|-----------------------------------------------------------
{| border=1 class="simple"
!=Number of reopened tickets: =
!\
|- 
|  **[[TicketQuery(status=reopened,count)]]**
| \
|- 
| colspan=2| <tt>[[TicketQuery(status=reopened,count)]]</tt> 
|}

|-----------------------------------------------------------
{| border=1 class="simple"
!=Number of assigned tickets: =
!\
|- 
|  **[[TicketQuery(status=assigned,count)]]**
| \
|- 
| colspan=2| <tt>[[TicketQuery(status=assigned,count)]]</tt> 
|}

|-----------------------------------------------------------
{| border=1 class="simple"
!=Number of invalid tickets: =
!\
|- 
|  **[[TicketQuery(status=closed,resolution=invalid,count)]]**
| \
|- 
| colspan=2| <tt>[[TicketQuery(status=closed,resolution=invalid,count)]]</tt> 
|}

|-----------------------------------------------------------
{| border=1 class="simple"
!=Number of worksforme tickets: =
!\
|- 
|  **[[TicketQuery(status=closed,resolution=worksforme,count)]]**
| \
|- 
| colspan=2| <tt>[[TicketQuery(status=closed,resolution=worksforme,count)]]</tt> 
|}

|-----------------------------------------------------------
{| border=1 class="simple"
!=Number of duplicate tickets: =
!\
|- 
|  **[[TicketQuery(status=closed,resolution=duplicate,count)]]**
| \
|- 
| colspan=2| <tt>[[TicketQuery(status=closed,resolution=duplicate,count)]]</tt> 
|}

|-----------------------------------------------------------
{| border=1 class="simple"
!=Number of wontfix tickets: =
!\
|- 
|  **[[TicketQuery(status=closed,resolution=wontfix,count)]]**
| \
|- 
| colspan=2| <tt>[[TicketQuery(status=closed,resolution=wontfix,count)]]</tt> 
|}

|-----------------------------------------------------------
{| border=1 class="simple"
!=Number of fixed tickets: =
!\
|- 
|  **[[TicketQuery(status=closed,resolution=fixed,count)]]**
| \
|- 
| colspan=2| <tt>[[TicketQuery(status=closed,resolution=fixed,count)]]</tt> 
|}

|-----------------------------------------------------------
{| border=1 class="simple"
!=Total number of tickets: =
!\
|- 
|  **[[TicketQuery(count)]]**
| \
|- 
| colspan=2| <tt>[[TicketQuery(count)]]</tt> 
|}

|-----------------------------------------------------------
{| border=1 class="simple"
!=Number of tickets reported **or** owned by current user: =
!\
|- 
|  **[[TicketQuery(reporter=$USER,or,owner=$USER,count)]]**
| \
|- 
| colspan=2| <tt>[[TicketQuery(reporter=$USER,or,owner=$USER,count)]]</tt> 
|}

|-----------------------------------------------------------
{| border=1 class="simple"
!=Number of tickets created this month: =
!\
|- 
|  **[[TicketQuery(created=thismonth..,count)]]**
| \
|- 
| colspan=2| <tt>[[TicketQuery(created=thismonth..,count)]]</tt> 
|}

|-----------------------------------------------------------
{| border=1 class="simple"
!=Last 3 modified tickets: =
!\
|- 
| **[[TicketQuery(max=3,order=modified,desc=1,compact)]]**
| \
|- 
| colspan=2| <tt>[[TicketQuery(max=3,order=modified,desc=1,compact)]]</tt> 
|}

|-----------------------------------------------------------
<pre>#th rowspan=2, style="text-align: left;"
Details of ticket #1:
</pre>
<pre>#td style="border-bottom: 0;"
</pre>
<pre>#td
<tt>[[TicketQuery(id=1,col=id|owner|reporter,rows=summary,table)]]</tt>
</pre>
|-
<pre>#td colspan=2, style="border-top: 0;"
[[TicketQuery(id=1,col=id|owner|reporter,rows=summary,table)]]
</pre>
|-----------------------------------------------------------

== Using the <tt>[[TicketQuery]]</tt> Macro

The [trac:TicketQuery TicketQuery] macro lets you display lists of tickets matching certain criteria anywhere you can use WikiFormatting.

Example:
<pre>
[[TicketQuery(version=0.6|0.7&resolution=duplicate)]]
</pre>

This is displayed as:
  [[TicketQuery(version=0.6|0.7&resolution=duplicate)]]

Just like the [/TracQuery#UsingTracLinks query: wiki links], the parameter of this macro expects a query string formatted according to the rules of the simple [/TracQuery#QueryLanguage ticket query language]. This also displays the link and description of a single ticket:
<pre>
[[TicketQuery(id=123)]]
</pre>

This is displayed as:
  [[TicketQuery(id=123)]]

A more compact representation without the ticket summaries is:
<pre>
[[TicketQuery(version=0.6|0.7&resolution=duplicate, compact)]]
</pre>

This is displayed as:
  [[TicketQuery(version=0.6|0.7&resolution=duplicate, compact)]]

Finally, if you wish to receive only the number of defects that match the query, use the <tt>count</tt> parameter:
<pre>
[[TicketQuery(version=0.6|0.7&resolution=duplicate, count)]]
</pre>

This is displayed as:
  [[TicketQuery(version=0.6|0.7&resolution=duplicate, count)]]

----
See also: TracQuery, TracTickets, TracReports, TracGuide




